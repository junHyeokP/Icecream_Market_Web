<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.memberDAO">
	
	<!-- 세미콜론은 붙이면 안된다 -->
	<!-- 
		parameterType을 사용하는 방법

		파라미터의 값으로 사용 : #{변수명}
		파라미터 명으로 사용  : ${변수명}
	 -->
	 
	 <!-- COMMIT -->
	 <insert id = "insertMember" parameterType = "MemberVO">
	 	insert into ice_member(id, name, password, email_id, email_domain, basic_addr, detail_addr)
	 	       values (#{id}
	 	       		  ,#{name}
	 	       		  ,#{password}
	 	       		  ,#{email_id}
	 	       		  ,#{email_domain}
	 	       		  ,#{basic_addr}
	 	       		  ,#{detail_addr}
	 	       		  )     		  
	 </insert>
	 
	 <select id = "selectByID" resultType = "MemberVO">
	 		select id, name, password, email_id, email_domain, basic_addr, detail_addr, to_char(reg_date, 'yyyy-mm-dd') as reg_date
	 		  from ice_member
	 		 where id = #{id}  
	 </select>
	 
	 <update id = "updateMember" parameterType = "MemberVO">
	 	update ice_member
	 	   <set>
	 	   		<if test = "id != null">id = #{id},</if>
	 	   		<if test = "name != null">name = #{name},</if>
	 	   		<if test = "password != null">password = #{password},</if>
	 	   		<if test = "email_id != null">email_id = #{email_id},</if>
	 	   		<if test = "email_domain != null">email_domain = #{email_domain},</if>
	 	   		<if test = "basic_addr != null">basic_addr = #{basic_addr},</if>
	 	   		<if test = "detail_addr != null">detail_addr = #{detail_addr},</if>
	 	   </set>  
	 	where id = #{id}	   
	 </update>
	
	<delete id = "deleteMember" parameterType = "String">
		delete ice_member where id = #{id}
	</delete>
	
</mapper>